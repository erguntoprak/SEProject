
<div class="breadcrumb-area">
  <h1>Dashboard</h1>

  <ol class="breadcrumb">
    <li class="item"><a href="dashboard-analytics.html"><i class="bx bx-home-alt"></i></a></li>

    <li class="item">Dashboard</li>

    <li class="item">Forms</li>
  </ol>
</div>
<div class="card mb-30">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h3>Eğitim Ekle</h3>
    <hr />
  </div>

  <div class="card-body">
    <form [formGroup]="educationForm" (ngSubmit)="onSubmit()">
      <div formGroupName="generalInformation" [style.display]="nextStepOneControl ? 'block': 'none'">
        <div class="form-row" *ngIf="errorList">
          <span class="not-valid" *ngFor="let error of errorList">
            {{error}}
          </span>
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">
            <label>Eğitim Adı</label>
            <input formControlName="educationName" class="form-control" placeholder="Eğitim Adı" />
            <span class="not-valid" *ngIf="nextStepOneValidation && educationForm.get('generalInformation').get('educationName').errors != null ? educationForm.get('generalInformation').get('educationName').errors.required:false">
              Lütfen eğitim adı giriniz.
            </span>
          </div>
          <div class="form-group col-md-6">
            <label>Eğitim Türü</label>
            <select (change)="educationTypeOnChange($event)" formControlName="educationType" class="form-control">
              <option value="0" selected>Seçiniz</option>
              <option [ngValue]="category.id" *ngFor="let category of categories">{{category.name}}</option>
            </select>
            <span class="not-valid" *ngIf="nextStepOneValidation && educationForm.get('generalInformation').get('educationType').errors != null ? educationForm.get('generalInformation').get('educationType').errors.min:false">
              Lütfen eğitim türü seçiniz.
            </span>
          </div>
          <div class="form-group col-md-12">
            <label>Açıklama</label>
            <angular-editor formControlName="description" [config]="editorConfig"></angular-editor>
          </div>
          <div class="form-group col-md-12">
            <label>Görseller</label>
            <div class="row">
              <div class="col-md-2" style="padding:10px;" *ngFor='let url of urlImages'>
                <div class="single-place">
                  <span class="remove-button" (click)="removeImage(url.key,url.value)"><i class="bx bxs-no-entry"></i></span>
                  <img [id]="url.key" class="single-place-image" src="https://localhost:44362/images/{{url.value}}_1000x600.jpg">
                </div>
              </div>
            </div>
            <div class="custom-file">
              <input type="file" class="custom-file-input" accept="image/*" multiple (change)="onSelectFile($event)">
              <label class="custom-file-label">Görsel Seç</label>
            </div>
            <span class="not-valid" *ngIf="nextStepOneValidation && urlImages.length==0">
              Lütfen görsel seçiniz.
            </span>
          </div>
        </div>
        <button type="button" class="btn btn-primary float-right" (click)="nextStepOneClick()">Devam Et</button>
      </div>
      <div [style.display]="nextStepTwoControl ? 'block': 'none'">
        <div *ngFor="let attribute of attributeList" class="group-box">
          <div class="group-box-title">
            <h5>{{ attribute.categoryName }}</h5>
          </div>
          <div class="db-add-listing">
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <div *ngFor="let attribute of attribute.attributeListModel" class="attribute-checkbox">
                    <se-checkbox (change)="onChange(attribute.id, $event.target.checked)" [id]="attribute.id" [existingAttributeIds]="existingAttributeIds" [text]="attribute.name"></se-checkbox>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <button class="btn btn-primary next-button float-right" (click)="nextStepTwoClick()" type="button">Devam Et</button>
        <button class="btn btn-primary previous-button float-right" (click)="previousStepTwoClick()" type="button">Geri</button>
      </div>
      <div [style.display]="nextStepThreeControl ? 'block': 'none'">
        <div formGroupName="addressInformation" class="group-box">
          <div class="group-box-title">
            <h5>Adres Bilgileri</h5>
          </div>
          <div class="form-row">
            <div class="form-group col-md-6">
              <label>İl</label>
              <select formControlName="cityId" class="form-control">
                <option value="0" selected>Seçiniz</option>
                <option *ngIf="city" [ngValue]="city.id">{{city.name}}</option>
              </select>
              <span class="not-valid" *ngIf="nextStepThreeValidation && educationForm.get('addressInformation').get('cityId').errors != null ? educationForm.get('addressInformation').get('cityId').errors.min:false">
                Lütfen il seçiniz.
              </span>
            </div>
            <div class="form-group col-md-6">
              <label>İlçe</label>
              <select formControlName="districtId" class="form-control">
                <option value="0" selected>Seçiniz</option>
                <option [ngValue]="district.id" *ngFor="let district of districtList">{{district.name}}</option>
              </select>
              <span class="not-valid" *ngIf="nextStepThreeValidation && educationForm.get('addressInformation').get('districtId').errors != null ? educationForm.get('addressInformation').get('districtId').errors.min:false">
                Lütfen ilçe seçiniz.
              </span>
            </div>
            <div class="form-group col-md-12">
              <label>Adres</label>
              <input formControlName="address" class="form-control" placeholder="Adres" />
              <span class="not-valid" *ngIf="nextStepThreeValidation && educationForm.get('addressInformation').get('address').errors != null ? educationForm.get('addressInformation').get('address').errors.required:false">
                Lütfen adres giriniz.
              </span>
            </div>
          </div>
        </div>
        <div formGroupName="contactInformation" class="group-box">
          <div class="group-box-title">
            <h5>İletişim Bilgileri</h5>
          </div>
          <div class="form-row">
            <div class="form-group col-md-6">
              <label>Yetkili Adı</label>
              <input formControlName="authorizedName" class="form-control" placeholder="Yetkili Adı" />
              <span class="not-valid" *ngIf="nextStepThreeValidation && educationForm.get('contactInformation').get('authorizedName').errors != null ? educationForm.get('contactInformation').get('authorizedName').errors.required:false">
                Lütfen yetkili adı giriniz.
              </span>
            </div>
            <div class="form-group col-md-6">
              <label>Yetkili Email</label>
              <input formControlName="authorizedEmail" class="form-control" placeholder="Yetkili Email" />
              <span class="not-valid" *ngIf="nextStepThreeValidation && educationForm.get('contactInformation').get('authorizedEmail').errors != null ? educationForm.get('contactInformation').get('authorizedEmail').errors.required:false">
                Lütfen yetkili email giriniz.
              </span>
              <span class="not-valid" *ngIf="nextStepThreeValidation && educationForm.get('contactInformation').get('authorizedEmail').errors != null ? educationForm.get('contactInformation').get('authorizedEmail').errors.email:false">
                Lütfen geçerli Email giriniz.
              </span>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-6">
              <label>Telefon</label>
              <input formControlName="phoneOne" mask="(000) 000 00 00" class="form-control" placeholder="Telefon" />
              <span class="not-valid" *ngIf="nextStepThreeValidation && educationForm.get('contactInformation').get('phoneOne').errors != null ? educationForm.get('contactInformation').get('phoneOne').errors.required:false">
                Lütfen telefon giriniz.
              </span>
              <span class="not-valid" *ngIf="nextStepThreeValidation && educationForm.get('contactInformation').get('phoneOne').errors != null ? educationForm.get('contactInformation').get('phoneOne').errors['Mask error']:false">
                Lütfen geçerli bir telefon giriniz.
              </span>
            </div>
            <div class="form-group col-md-6">
              <label>Telefon 2</label>
              <input formControlName="phoneTwo" mask="(000) 000 00 00" class="form-control" placeholder="Telefon 2" />
              <span class="not-valid" *ngIf="nextStepThreeValidation && educationForm.get('contactInformation').get('phoneTwo').errors != null ? educationForm.get('contactInformation').get('phoneTwo').errors.required:false">
                Lütfen telefon giriniz.
              </span>
              <span class="not-valid" *ngIf="nextStepThreeValidation && educationForm.get('contactInformation').get('phoneTwo').errors != null ? educationForm.get('contactInformation').get('phoneTwo').errors['Mask error']:false">
                Lütfen geçerli bir telefon giriniz.
              </span>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-6">
              <label>Kurum Email</label>
              <input formControlName="educationEmail" class="form-control" placeholder="Kurum Email" />
              <span class="not-valid" *ngIf="nextStepThreeValidation && educationForm.get('contactInformation').get('educationEmail').errors != null ? educationForm.get('contactInformation').get('educationEmail').errors.required:false">
                Lütfen Email giriniz.
              </span>
              <span class="not-valid" *ngIf="nextStepThreeValidation && educationForm.get('contactInformation').get('educationEmail').errors != null ? educationForm.get('contactInformation').get('educationEmail').errors.email:false">
                Lütfen geçerli Email giriniz.
              </span>
            </div>
            <div class="form-group col-md-6">
              <label>Kurum Website</label>
              <input formControlName="educationWebsite" class="form-control" placeholder="Kurum Website" />
              <span class="not-valid" *ngIf="nextStepThreeValidation && educationForm.get('contactInformation').get('educationWebsite').errors != null ? educationForm.get('contactInformation').get('educationWebsite').errors.required:false">
                Lütfen kurum website giriniz.
              </span>
            </div>
          </div>
        </div>
        <div class="group-box">
          <div class="group-box-title">
            <h5>En Çok Sorulan Soru ve Cevap</h5>
          </div>
          <div formArrayName="questions">
            <div class="form-row" [formGroupName]="i" *ngFor="let item of getQuestionControl(); let i = index;">
              <div class="form-group col-md-12">
                <strong>Cevap bölümünde cevaplarınızı satır satır göstermek için her cümle veya kelime sonuna noktalı virgül ekleyiniz.(';')</strong>
              </div>
              <div class="form-group col-md-6">
                <label>Soru</label>
                <textarea formControlName="question" class="form-control" placeholder="Soru"></textarea>
              </div>
              <div class="form-group col-md-6">
                <label>Cevap</label>
                <textarea formControlName="answer" class="form-control" placeholder="Cevap"></textarea>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-md-6">
                <button class="btn btn-primary previous-button" (click)="addQuestionItem()" type="button">Soru Ekle</button>
              </div>
            </div>
          </div>
        </div>
        <button class="btn btn-primary next-button float-right" type="submit">Kaydet</button>
        <button class="btn btn-primary previous-button float-right" (click)="previousStepThreeClick()" type="button">Geri</button>
      </div>
    </form>
    <div [style.display]="nextStepFourValidation ? 'block': 'none'">
      <div class="form-row">
        <div class="form-group col-md-12">
          <h6>Sayfalarda gösterilecek ilk görselini seçiniz.</h6>
          <span class="not-valid" *ngIf="isSelectFirstVisibleImage">
            Aşağıdaki görsellerden birini seçmeniz gerekiyor.
          </span>
          <div class="row">
            <div class="col-md-2" style="padding:10px;" *ngFor='let image of savedImageList'>
              <div class="single-place">
                <img [id]="image.id" (click)="selectFirstVisibleImage(image)" class="single-place-image" [ngClass]="{'active': selectedImageModel.id === image.id}" src="https://localhost:44362/images/{{image.imageUrl}}_1000x600.jpg">
              </div>
            </div>
          </div>
        </div>
      </div>
      <button type="button" (click)="saveSelectedFirsImage()" class="btn btn-primary float-right">Kaydet</button>
    </div>
  </div>
</div>

